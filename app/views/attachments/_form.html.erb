<% locals = {} %>
<% locals[:container] = container if defined?(container) %>
<% locals[:attachment_param] = attachment_param if defined?(attachment_param) %>
<% locals[:multiple] = multiple if defined?(multiple) %>
<% locals[:description] = description if defined?(description) %>
<% locals[:saved_attachments] = saved_attachments if defined?(saved_attachments) %>
<% locals[:filedrop] = filedrop if defined?(filedrop) %>

<%= render :parent, {:locals => locals} %>

<% content_for :header_tags do %>
  <% maxFileUploads = Setting.plugin_that_attachments_limit['attachments_limit'].to_i %>
  <%= javascript_tag("var maxFileUploads = #{maxFileUploads > 0 ? maxFileUploads : 10};") %>
  <%= javascript_include_tag('attachments', :plugin => 'that_attachments_limit') %>
<% end %>
